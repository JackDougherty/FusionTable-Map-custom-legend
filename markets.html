<!DOCTYPE html>
<!--
  Copyright 2011 Google Inc. All Rights Reserved.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    
    <!--MODIFY your web page title -->
    <title>Fusion Tables Layer Example: Legend</title>

    <script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <style type="text/css">
      html, body, #map-canvas {
        height: 100%;
        width: 100%;
        padding: 0;
        margin: 0;
      }
    
      #legend {
        background: #FFF;
        padding: 10px;
        margin: 5px;
        font-size: 12px;
        font-family: Arial, sans-serif;
      }
      .color {
        border: 1px solid;
        height: 12px;
        width: 12px;
        margin-right: 3px;
        float: left;
      }
      .red {
        background: #C00;
      }
      .yellow {
        background: #FF3;
      }
      .green {
        background: #6F0;
      }
      .blue {
        background: #06C;
      }
      .purple {
        background: #63C;
      }
    </style>

    <script type="text/javascript">
      function initialize() {
        // MODIFY the map center point, zoom level, and type if desired
        var map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: new google.maps.LatLng(37.4, -90.1),
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        // MODIFY: Insert your Google Fusion Table ID number, which is File menu > About this Table
        // Also, if your geocoded data column is not named "Location," change it below to match yours
        var layer = new google.maps.FusionTablesLayer({
          query: {
            select: 'Address',
            from: '1RXgs33--EUO1ARJsNr0VQwju9TyebQpkuBlbxmlF'
          },
          <!DOCTYPE html>
<html>
<head>
<meta name="viewport"></meta>
<title>Markets - Google Fusion Tables</title>
<style type="text/css">
html, body, #googft-mapCanvas {
  height: 300px;
  margin: 0;
  padding: 0;
  width: 500px;
}
</style>

<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&amp;v=3"></script>

<script type="text/javascript">
  function initialize() {
    google.maps.visualRefresh = true;
    var isMobile = (navigator.userAgent.toLowerCase().indexOf('android') > -1) ||
      (navigator.userAgent.match(/(iPod|iPhone|iPad|BlackBerry|Windows Phone|iemobile)/));
    if (isMobile) {
      var viewport = document.querySelector("meta[name=viewport]");
      viewport.setAttribute('content', 'initial-scale=1.0, user-scalable=no');
    }
    var mapDiv = document.getElementById('googft-mapCanvas');
    mapDiv.style.width = isMobile ? '100%' : '500px';
    mapDiv.style.height = isMobile ? '100%' : '300px';
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(35.38204086593439, -114.02435979999996),
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend-open'));
    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend'));

    layer = new google.maps.FusionTablesLayer({
      map: map,
      heatmap: { enabled: false },
      query: {
        select: "col0",
        from: "1RXgs33--EUO1ARJsNr0VQwju9TyebQpkuBlbxmlF",
        where: ""
      },
      options: {
        styleId: 5,
        templateId: 6
      }
    });

    if (isMobile) {
      var legend = document.getElementById('googft-legend');
      var legendOpenButton = document.getElementById('googft-legend-open');
      var legendCloseButton = document.getElementById('googft-legend-close');
      legend.style.display = 'none';
      legendOpenButton.style.display = 'block';
      legendCloseButton.style.display = 'block';
      legendOpenButton.onclick = function() {
        legend.style.display = 'block';
        legendOpenButton.style.display = 'none';
      }
      legendCloseButton.onclick = function() {
        legend.style.display = 'none';
        legendOpenButton.style.display = 'block';
      }
    }
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
  <div id="googft-mapCanvas"></div>
</body>
</html>
          map: map
        });
        // MODIFY Title and text of your legend. Match color names to the GFT map you already created.
        var legend = document.createElement('div');
        legend.id = 'legend';
        var content = [];
        content.push('<h3>Company</h3>');
        content.push('<p><div class="color green"></div>The Fresh Market</p>');
        content.push('<p><div class="color blue"></div>Whole Foods Market</p>');
        content.push('<p><div class="color yellow"></div>Sprouts Farmers Market</p>');
        content.push('<p>*Only US locations</p>');
        legend.innerHTML = content.join('');
        legend.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html>
